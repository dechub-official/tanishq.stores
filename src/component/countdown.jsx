import React, { useState, useEffect } from 'react';

const CountdownTimer = ({ targetDate,updatTimer,text }) => {
    const calculateTimeLeft = () => {
        const now = new Date().getTime();
        const targetTime = new Date(targetDate).getTime();
        const difference = targetTime - now;

        if (difference <= 0) {
            // If target time has passed, set timeLeft to zero
            updatTimer()
            return {
                hours: 0,
                minutes: 0,
                seconds: 0,
              
            };
        }

        const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((difference % (1000 * 60)) / 1000);

        return {
            hours,
            minutes,
            seconds,
        };
    };

    const [timeLeft, setTimeLeft] = useState(calculateTimeLeft());

    useEffect(() => {
        const interval = setInterval(() => {
            setTimeLeft(calculateTimeLeft());
        }, 1000);

        return () => {
            clearInterval(interval);
        };
    }, [targetDate]);

    return (
        <p className='text-white md:w-auto text-[13.5px] flex items-center justify-center px-2 md:text-[16px] font-[600]  py-1'><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16" fill="none">
            <path d="M0.0944567 10.7633C0.41827 12.4396 1.4725 13.9531 2.92414 14.8474C4.3813 15.7548 6.12731 16.0373 7.80157 15.9961C9.47031 15.9531 11.2292 15.6556 12.69 14.6229C13.4131 14.114 14.0202 13.4068 14.4121 12.5911C14.7875 11.7904 14.9917 10.9503 14.977 10.0224C15.2254 9.79226 15.4535 9.5266 15.6283 9.21416C15.873 8.79508 16.0036 8.29555 15.9999 7.80911C16.0036 6.82689 15.5381 5.97564 15.0966 5.28154C14.6881 4.60988 14.368 3.87836 14.195 3.10943C14.0129 2.35171 13.9559 1.5173 14.0607 0.787647L14.1748 0L13.5327 0.409726C12.8869 0.871837 12.3809 1.42001 11.9596 2.0636C11.5475 2.70344 11.2678 3.44432 11.2016 4.20764C11.1354 4.97097 11.2678 5.73803 11.5677 6.42465C11.8713 7.1094 12.3184 7.71183 12.8777 8.19452C12.909 8.22258 12.9568 8.21697 12.9844 8.18516C13.0102 8.15336 13.0083 8.10846 12.9789 8.08039L12.9734 8.07665C12.4711 7.58648 12.0737 6.97095 11.8345 6.31427C11.5972 5.65759 11.5217 4.93916 11.6248 4.26003C11.7278 3.57902 12.0167 2.93918 12.4214 2.391C12.6698 2.05424 12.9697 1.74367 13.2898 1.47052C13.2861 1.6389 13.2862 1.80541 13.2917 1.97566C13.3082 2.41345 13.3653 2.84937 13.4591 3.27594C13.6339 4.13281 13.9743 4.95226 14.4103 5.70249C14.6256 6.07479 14.8132 6.38536 14.9475 6.74645C15.0818 7.09817 15.1628 7.45739 15.1573 7.8035C15.1646 8.36851 14.8997 8.87739 14.4857 9.28899C14.425 9.24596 14.3661 9.20667 14.3073 9.16925C14.0957 9.0439 13.8859 8.9541 13.678 8.87365C13.2604 8.71837 12.8427 8.61547 12.4269 8.52754C11.5953 8.35541 10.7637 8.26561 9.93211 8.21136C8.27073 8.10472 6.61119 8.12342 4.95349 8.26C4.12372 8.33296 3.29395 8.43399 2.46234 8.60799C2.04469 8.69779 1.62889 8.80443 1.20388 8.96907C0.992301 9.05326 0.7752 9.15055 0.554418 9.30583C0.444027 9.38441 0.328116 9.47982 0.219565 9.61827C0.112854 9.75484 0.00614229 9.96251 0.000622755 10.202C-0.00673663 10.3984 0.0521381 10.5706 0.123892 10.7053C0.101814 10.7165 0.0889354 10.7371 0.0926151 10.7614L0.0944567 10.7633ZM13.7148 9.87458C13.2236 10.1646 12.6698 10.3853 12.1068 10.5612C11.3525 10.7932 10.5705 10.9541 9.77756 11.0645C8.19162 11.2852 6.57255 11.3264 4.97189 11.2235C4.17339 11.1674 3.3749 11.0757 2.60768 10.9111C2.22684 10.8287 1.84967 10.724 1.5185 10.5855C1.35475 10.5182 1.20204 10.434 1.11005 10.3573C1.08061 10.3292 1.03462 10.2824 1.01622 10.2488C1.0383 10.2244 1.07693 10.1889 1.12845 10.1515C1.2462 10.071 1.40443 9.99245 1.57185 9.92697C1.91038 9.79226 2.28939 9.69123 2.67208 9.60704C3.44114 9.44053 4.23963 9.33763 5.0418 9.2628C6.64431 9.12061 8.26889 9.09629 9.87508 9.18983C10.6772 9.24222 11.4776 9.3208 12.2558 9.45737C12.6422 9.52847 13.0249 9.6164 13.38 9.73801C13.4977 9.77917 13.6081 9.82594 13.7148 9.87458ZM0.236123 10.8755C0.309717 10.9728 0.386991 11.057 0.480823 11.1393C0.708964 11.3208 0.927907 11.4256 1.14133 11.5154C1.57001 11.6893 1.98766 11.796 2.40714 11.8839C3.24427 12.0542 4.07772 12.1421 4.91301 12.1926C6.57991 12.2824 8.24865 12.2244 9.90635 11.9775C10.7343 11.854 11.5585 11.6781 12.3699 11.4199C12.9623 11.2272 13.5511 10.9915 14.1067 10.6604C14.0938 10.8231 14.0754 10.9878 14.0478 11.1449C13.9779 11.5266 13.8675 11.9026 13.7148 12.2581C13.4057 12.969 12.9163 13.5977 12.2945 14.0729C11.0471 15.0401 9.39672 15.4162 7.78317 15.5172C6.16779 15.6164 4.49169 15.4087 3.06949 14.593C1.69328 13.8166 0.637209 12.4414 0.236123 10.8736V10.8755Z" fill="white" />
        </svg> &nbsp; &nbsp;Muhurat {text} in  {" "}  {timeLeft.hours}h {" "} 
       {timeLeft.minutes}m {" "}
      {timeLeft.seconds}s &nbsp; &nbsp;
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16" fill="none">
                <path d="M15.9055 10.7633C15.5817 12.4396 14.5275 13.9531 13.0759 14.8474C11.6187 15.7548 9.87269 16.0373 8.19843 15.9961C6.52969 15.9531 4.7708 15.6556 3.30996 14.6229C2.5869 14.114 1.97975 13.4068 1.58786 12.5911C1.21253 11.7904 1.00831 10.9503 1.02303 10.0224C0.77465 9.79226 0.546508 9.5266 0.371722 9.21416C0.127023 8.79508 -0.00360489 8.29555 7.53403e-05 7.80911C-0.00360489 6.82689 0.461877 5.97564 0.90344 5.28154C1.31189 4.60988 1.63202 3.87836 1.80496 3.10943C1.98711 2.35171 2.04415 1.5173 1.93927 0.787647L1.8252 0L2.46731 0.409726C3.1131 0.871837 3.61905 1.42001 4.04038 2.0636C4.4525 2.70344 4.73216 3.44432 4.79839 4.20764C4.86463 4.97097 4.73216 5.73803 4.43226 6.42465C4.12869 7.1094 3.68161 7.71183 3.12229 8.19452C3.09102 8.22258 3.04318 8.21697 3.01559 8.18516C2.98983 8.15336 2.99167 8.10846 3.0211 8.08039L3.02662 8.07665C3.5289 7.58648 3.92631 6.97095 4.16549 6.31427C4.40283 5.65759 4.47826 4.93916 4.37523 4.26003C4.2722 3.57902 3.98334 2.93918 3.57858 2.391C3.3302 2.05424 3.0303 1.74367 2.71017 1.47052C2.71385 1.6389 2.71385 1.80541 2.70833 1.97566C2.69177 2.41345 2.63473 2.84937 2.5409 3.27594C2.36612 4.13281 2.02575 4.95226 1.5897 5.70249C1.37444 6.07479 1.18678 6.38536 1.05247 6.74645C0.918159 7.09817 0.837203 7.45739 0.842722 7.8035C0.835363 8.36851 1.10031 8.87739 1.51427 9.28899C1.57499 9.24596 1.63386 9.20667 1.69274 9.16925C1.90432 9.0439 2.11406 8.9541 2.32196 8.87365C2.7396 8.71837 3.15725 8.61547 3.57306 8.52754C4.40467 8.35541 5.23628 8.26561 6.06789 8.21136C7.72927 8.10472 9.38881 8.12342 11.0465 8.26C11.8763 8.33296 12.7061 8.43399 13.5377 8.60799C13.9553 8.69779 14.3711 8.80443 14.7961 8.96907C15.0077 9.05326 15.2248 9.15055 15.4456 9.30583C15.556 9.38441 15.6719 9.47982 15.7804 9.61827C15.8871 9.75484 15.9939 9.96251 15.9994 10.202C16.0067 10.3984 15.9479 10.5706 15.8761 10.7053C15.8982 10.7165 15.9111 10.7371 15.9074 10.7614L15.9055 10.7633ZM2.28517 9.87458C2.77641 10.1646 3.3302 10.3853 3.89319 10.5612C4.64753 10.7932 5.42946 10.9541 6.22244 11.0645C7.80838 11.2852 9.42745 11.3264 11.0281 11.2235C11.8266 11.1674 12.6251 11.0757 13.3923 10.9111C13.7732 10.8287 14.1503 10.724 14.4815 10.5855C14.6453 10.5182 14.798 10.434 14.89 10.3573C14.9194 10.3292 14.9654 10.2824 14.9838 10.2488C14.9617 10.2244 14.9231 10.1889 14.8716 10.1515C14.7538 10.071 14.5956 9.99245 14.4281 9.92697C14.0896 9.79226 13.7106 9.69123 13.3279 9.60704C12.5589 9.44053 11.7604 9.33763 10.9582 9.2628C9.35569 9.12061 7.73111 9.09629 6.12492 9.18983C5.32275 9.24222 4.52242 9.3208 3.74416 9.45737C3.3578 9.52847 2.9751 9.6164 2.62001 9.73801C2.50226 9.77917 2.39188 9.82594 2.28517 9.87458ZM15.7639 10.8755C15.6903 10.9728 15.613 11.057 15.5192 11.1393C15.291 11.3208 15.0721 11.4256 14.8587 11.5154C14.43 11.6893 14.0123 11.796 13.5929 11.8839C12.7557 12.0542 11.9223 12.1421 11.087 12.1926C9.42009 12.2824 7.75135 12.2244 6.09365 11.9775C5.26571 11.854 4.44146 11.6781 3.63009 11.4199C3.03766 11.2272 2.44891 10.9915 1.89328 10.6604C1.90616 10.8231 1.92456 10.9878 1.95216 11.1449C2.02207 11.5266 2.13246 11.9026 2.28517 12.2581C2.59426 12.969 3.08366 13.5977 3.70553 14.0729C4.95294 15.0401 6.60328 15.4162 8.21683 15.5172C9.83221 15.6164 11.5083 15.4087 12.9305 14.593C14.3067 13.8166 15.3628 12.4414 15.7639 10.8736V10.8755Z" fill="white" />
            </svg>
        </p>
    );
};

export default CountdownTimer;
